#N canvas 530 128 872 629 12;
#X obj 648 85 table \$0-buffer;
#X obj 480 90 soundfiler;
#X obj 480 146 samplerate~;
#X obj 557 175 /;
#X msg 211 434 \; speed 8 \; cents -4200 \; grain 400;
#X msg 90 437 \; speed -36 \; cents 200 \; grain 1000;
#X msg 90 509 \; speed 8 \; cents -3400 \; grain 400;
#X msg 90 365 \; speed 50 \; cents -4200 \; grain 100;
#X msg 211 507 \; speed 4 \; cents -2400 \; grain 14;
#X text 107 338 presets:;
#X obj 212 340 loadbang;
#X obj 728 275 nbx 5 18 -1e+37 1e+37 0 0 empty speed empty 0 -8 0 13
-228856 -1 -1 11 256;
#X obj 643 508 +~;
#X obj 635 275 nbx 4 18 -1e+37 1e+37 0 0 empty cents empty 0 -8 0 13
-228856 -1 -1 0 256;
#X text 591 276 Cents;
#X obj 488 272 nbx 4 18 3 1e+37 0 0 empty grain empty 0 -8 0 13 -191407
-1 -1 50 256;
#X obj 658 346 -~;
#X obj 640 372 *~;
#X obj 643 548 out~;
#X obj 728 430 else/display~ 5;
#X obj 640 398 else/display~ 5;
#X text 776 431 Hz;
#X obj 635 303 cents2ratio;
#X obj 515 305 expr 1000 / $f1;
#X obj 488 363 ms2samps;
#X text 487 249 size (ms);
#X text 593 254 Transposition;
#X obj 480 30 initmess read -resize ../../../../../samples/bubul.wav
\$0-buffer, f 39;
#N canvas 548 149 536 467 grain-2 0;
#X text 108 30 Same thing \, but [pimp~] is out of phase.;
#X obj 216 258 +~;
#X obj 141 229 *~;
#X obj 311 406 *~;
#X obj 311 434 outlet~;
#X obj 244 99 inlet~;
#X obj 159 206 sh~;
#X obj 329 239 envelope~;
#X obj 141 98 inlet~;
#X obj 216 343 tabread4~ \$0-buffer, f 9;
#X obj 216 317 wrap2~;
#X obj 306 190 r \$0-size;
#X obj 51 158 r~ \$0-samps;
#X text 138 72 transp;
#X text 245 71 speed;
#X obj 244 126 display~ 8;
#X obj 141 126 display~ 8;
#X obj 234 158 ramp~;
#X obj 141 158 pimp~ 0 0.5;
#X connect 1 0 10 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 5 0 15 0;
#X connect 6 0 2 1;
#X connect 7 0 3 1;
#X connect 8 0 16 0;
#X connect 9 0 3 0;
#X connect 10 0 9 0;
#X connect 11 0 10 2;
#X connect 11 0 17 3;
#X connect 12 0 6 0;
#X connect 15 0 17 1;
#X connect 16 0 18 0;
#X connect 17 0 1 1;
#X connect 18 0 2 0;
#X connect 18 0 7 0;
#X connect 18 1 6 1;
#X restore 661 478 pd grain-2;
#X obj 480 120 t b f, f 14;
#X text 618 201 sample frequency;
#N canvas 864 273 576 564 grain-1 0;
#X obj 249 329 +~;
#X obj 194 300 *~;
#X obj 344 477 *~;
#X obj 344 505 outlet~;
#X obj 277 170 inlet~;
#X obj 212 277 sh~;
#X obj 362 310 envelope~;
#X obj 194 169 inlet~;
#X obj 249 414 tabread4~ \$0-buffer, f 9;
#X obj 249 388 wrap2~;
#X obj 194 229 pimp~;
#X obj 339 261 r \$0-size;
#X obj 104 229 r~ \$0-samps;
#X text 191 143 transp;
#X text 278 142 speed;
#X obj 277 197 display~ 8;
#X obj 194 197 display~ 8;
#X text 75 29 The speed frequency is multiplied by the sample lenght
in samples. The transposition frequency is sent to a [pimp~] object
\, which also controls the envelope. Its output is multiplied by the
grain size in samples and summed to the speed output. Now both frequencies
are combined and the sample is accessed.;
#X obj 267 229 ramp~;
#X obj 110 288 display~;
#X connect 0 0 9 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 15 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 7 0 16 0;
#X connect 8 0 2 0;
#X connect 9 0 8 0;
#X connect 10 0 1 0;
#X connect 10 0 6 0;
#X connect 10 1 5 1;
#X connect 11 0 9 2;
#X connect 11 0 18 3;
#X connect 12 0 5 0;
#X connect 12 0 19 0;
#X connect 15 0 18 1;
#X connect 16 0 10 0;
#X connect 18 0 0 1;
#X restore 570 477 pd grain-1;
#X obj 595 161 s \$0-size;
#X obj 488 389 s~ \$0-samps;
#X floatatom 515 330 5 0 0 0 - - -;
#X text 381 330 Grain Frequency =>;
#X obj 557 200 s \$0-Hz;
#X text 729 252 Speed (%);
#X text 591 397 transp;
#X text 689 399 Hz;
#X text 684 431 speed;
#X text 23 29 In this example we can choose any grain size and have
a quite different approach. The buffer is read by [pimp~] and [phasor~]
objects \, one affects the pitch and the other the speed., f 57;
#X text 23 92 These two are combined and need to be compensated for
the desired result. We do that by subtracting the speed ratio from
the transposition ratio.;
#X text 23 142 The speed frequency is calculated by the speed ratio
and the sample frequency. The transposition frequency needs to correspond
to the grain size \, so we multiply the resulting ratio by the grain
frequency \, obtained by the grain size., f 57;
#X obj 728 307 / 100;
#X obj 291 275 gran.player~;
#X text 23 225 Open [pd grain-1] for more details. Below we have some
presets. The [gran.player~] object \, from ELSE \, is based on this
patch \, check its help file:;
#X floatatom 455 418 0 0 0 0 - - -;
#X msg 212 365 \; speed 100 \; grain 50 \; cents 0;
#X connect 1 0 29 0;
#X connect 2 0 3 0;
#X connect 3 0 36 0;
#X connect 10 0 48 0;
#X connect 11 0 44 0;
#X connect 12 0 18 0;
#X connect 12 0 18 1;
#X connect 13 0 22 0;
#X connect 15 0 23 0;
#X connect 15 0 24 0;
#X connect 16 0 17 1;
#X connect 17 0 20 0;
#X connect 19 0 31 1;
#X connect 19 0 28 1;
#X connect 20 0 31 0;
#X connect 20 0 28 0;
#X connect 22 0 16 0;
#X connect 23 0 34 0;
#X connect 24 0 33 0;
#X connect 24 0 47 0;
#X connect 27 0 1 0;
#X connect 28 0 12 1;
#X connect 29 0 2 0;
#X connect 29 1 3 1;
#X connect 29 1 32 0;
#X connect 31 0 12 0;
#X connect 34 0 17 0;
#X connect 44 0 16 1;
#X connect 44 0 19 0;
