#N canvas 410 106 902 622 12;
#X floatatom 582 324 0 0 0 0 - - -;
#X obj 27 451 cnv 15 498 148 empty empty empty 20 12 0 14 -191407 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-Phase 8192 float 0;
#X coords 0 3.14 8191 -3.14 500 150 1 0 0;
#X restore 26 450 graph;
#X obj 24 282 cnv 15 498 148 empty empty empty 20 12 0 14 -228856 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-Amp 2048 float 0;
#X coords 0 8.99999 2048 0 500 150 1;
#X restore 23 281 graph;
#X obj 666 60 tabplay~ \$0-IR;
#X obj 666 25 bng 18 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X obj 325 97 hsl 128 15 0.001 0.99 0 0 empty fb empty -2 -6 0 8 -228856
-1 -1 12560 1;
#X obj 204 75 nbx 5 14 20 1e+37 0 0 Hz hz-set empty 0 -8 0 10 -228856
-1 -1 1000 256;
#X text 266 73 Hz;
#N canvas 81 160 548 498 FFT 0;
#X obj 273 107 bang~;
#X msg 336 170 1;
#X obj 83 105 rfft~;
#X msg 288 146 0;
#X obj 273 167 f;
#X obj 301 170 + 1;
#X msg 287 218 0;
#X obj 273 191 sel 1;
#X obj 381 266 switch~;
#X obj 252 75 trigger bang bang bang;
#X msg 381 169 set \$1 1;
#X obj 380 119 v w_size;
#X obj 83 71 tabreceive~ \$0-IR;
#X obj 83 206 tabwrite~ \$0-Amp;
#X obj 252 6 inlet;
#X obj 453 161 / 2;
#X msg 453 184 resize \$1;
#X obj 453 237 s \$0-Amp;
#X obj 463 214 s \$0-Fase;
#X obj 273 418 s \$0-Amp;
#X obj 273 319 v w_size;
#X obj 273 345 / 2;
#X obj 273 370 pack;
#X msg 273 393 bounds 0 \$2 \$1 0;
#X obj 273 291 trigger bang float;
#X obj 83 132 car2pol~;
#X obj 273 266 array max \$0-Amp;
#X obj 134 181 tabwrite~ \$0-Phase;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 2 0 25 0;
#X connect 2 1 25 1;
#X connect 3 0 4 1;
#X connect 4 0 5 0;
#X connect 4 0 7 0;
#X connect 5 0 4 1;
#X connect 6 0 8 0;
#X connect 7 0 6 0;
#X connect 7 0 26 0;
#X connect 9 0 13 0;
#X connect 9 0 27 0;
#X connect 9 1 1 0;
#X connect 9 2 3 0;
#X connect 9 2 11 0;
#X connect 10 0 8 0;
#X connect 11 0 10 0;
#X connect 11 0 15 0;
#X connect 12 0 2 0;
#X connect 14 0 9 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 16 0 18 0;
#X connect 20 0 21 0;
#X connect 21 0 22 0;
#X connect 22 0 23 0;
#X connect 23 0 19 0;
#X connect 24 0 20 0;
#X connect 24 1 22 1;
#X connect 25 0 13 0;
#X connect 25 1 27 0;
#X connect 26 0 24 0;
#X restore 418 216 pd FFT;
#X obj 418 187 bng 18 250 50 0 empty empty empty 17 7 0 10 -228856
-1 -1;
#X obj 81 98 bng 18 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X floatatom 582 275 0 0 0 0 - feedback -;
#X floatatom 661 310 0 0 0 0 - Hz -;
#X obj 582 347 t b f;
#X obj 693 387 v del_t;
#X obj 609 370 v dB;
#X obj 661 363 t b f;
#X text 578 255 feedback;
#X text 664 289 hertz;
#X obj 618 413 expr 60 * del_t/-dB;
#N canvas 357 70 308 176 init 0;
#X obj 157 93 v sr_khz;
#X obj 157 58 sr~ -khz;
#X obj 61 60 initmess \; hz-set 1000 \; fb 0.8;
#X connect 1 0 0 0;
#X restore 30 209 pd init;
#X obj 322 122 nbx 8 14 -1e+37 1e+37 0 0 feedback empty empty 0 -8
0 10 -228856 -1 -1 0.974425 256;
#X obj 138 118 impseq~;
#X obj 582 300 lin2db;
#X text 359 186 Analyze;
#X obj 666 94 out~;
#X obj 204 101 expr 1000 / $f1;
#X obj 204 127 f2s~ 10;
#X text 344 96 coefficients;
#X text 77 77 Record;
#X text 687 25 PLay;
#X obj 192 208 out~;
#X text 540 174 You can also calculate the decay time (t60) for this
filter from a frequency and feedback value. the conversion from t60
to feedback coefficient is also given., f 45;
#X text 59 18 This example records an IR from a comb filter then performs
a FFT to display its comb like shape response!;
#X obj 661 339 expr 1 / $f1;
#X obj 618 437 * 1000;
#X text 584 461 T60;
#X obj 618 461 nbx 8 16 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 12
-228856 -1 -1 266.631 256;
#X floatatom 618 575 6 0 0 0 - - -;
#X floatatom 777 573 6 0 0 0 - - -;
#X obj 618 551 db2lin;
#X text 666 573 <= feedback =>;
#X obj 618 508 expr -60 * del_t/$f1 \; exp(log(0.001) * 1000 * del_t/$f1)
;
#X obj 618 482 / 1000;
#X obj 192 158 comb.rev~ 100 1 0 0;
#N canvas 628 300 687 574 Rec-IR 0;
#X msg 301 183 stop;
#X msg 239 183 start;
#X obj 221 289 v length;
#X obj 159 260 t f f;
#X obj 170 152 select 1 0;
#X obj 289 215 tabwrite~ \$0-IR;
#X obj 170 123 change;
#X obj 34 278 s \$0-IR;
#X obj 159 194 timer;
#X obj 289 30 inlet~;
#X obj 170 77 env~ 2048 1024;
#X obj 170 101 > 0;
#X obj 385 413 cnv 15 198 98 empty empty empty 20 12 0 14 -233017 -66577
0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-IR 15359 float 0;
#X coords 0 1 15358 -1 200 100 1;
#X restore 384 412 graph;
#X obj 289 111 ffdelay~ 1024 -samps;
#X obj 159 299 log 2;
#X obj 159 328 expr pow(2 \, $i1 + 1);
#X obj 192 461 v w_size;
#X floatatom 159 383 0 0 0 0 - - -;
#X obj 177 484 s window-size;
#X msg 198 410 resize \$1;
#X obj 198 434 s \$0-IR;
#X obj 159 354 change;
#X text 355 56 Records IR \, find power of two larger than its length
to resize the table., f 36;
#X msg 293 267 resize \$1;
#X obj 293 291 s \$0-IR;
#X msg 34 234 resize 441000 \, const 0, f 14;
#X obj 159 224 ms2samps;
#X obj 34 180 inlet;
#X connect 0 0 5 0;
#X connect 1 0 5 0;
#X connect 3 0 15 0;
#X connect 3 1 2 0;
#X connect 3 1 24 0;
#X connect 4 0 1 0;
#X connect 4 0 8 0;
#X connect 4 1 0 0;
#X connect 4 1 8 1;
#X connect 6 0 4 0;
#X connect 8 0 27 0;
#X connect 9 0 10 0;
#X connect 9 0 14 0;
#X connect 10 0 11 0;
#X connect 11 0 6 0;
#X connect 14 0 5 0;
#X connect 15 0 16 0;
#X connect 16 0 22 0;
#X connect 18 0 19 0;
#X connect 18 0 17 0;
#X connect 18 0 20 0;
#X connect 20 0 21 0;
#X connect 22 0 18 0;
#X connect 24 0 25 0;
#X connect 26 0 7 0;
#X connect 27 0 3 0;
#X connect 28 0 26 0;
#X restore 113 201 pd Rec-IR;
#X obj 581 130 display 7;
#X obj 81 132 t b b;
#X obj 58 164 del 10;
#N canvas 19 175 371 586 t60 0;
#X floatatom 100 104 0 0 0 0 - - -;
#X obj 137 260 - 60;
#X obj 113 162 >;
#X obj 113 137 t f f f;
#X obj 137 216 f;
#X obj 113 183 sel 1;
#X floatatom 137 237 5 0 0 0 - - -;
#X obj 99 354 sel 1;
#X obj 152 346 b;
#X obj 100 328 change;
#X floatatom 152 441 0 0 0 0 - - -;
#X obj 152 392 realtime;
#X obj 100 35 inlet~;
#X obj 152 474 outlet;
#X obj 100 81 env~ 128;
#X obj 100 305 <;
#X connect 0 0 3 0;
#X connect 0 0 15 0;
#X connect 1 0 8 0;
#X connect 1 0 15 1;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 3 1 2 0;
#X connect 3 2 4 1;
#X connect 4 0 6 0;
#X connect 5 0 4 0;
#X connect 6 0 1 0;
#X connect 7 0 11 1;
#X connect 8 0 11 0;
#X connect 9 0 7 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 12 0 14 0;
#X connect 14 0 0 0;
#X connect 15 0 9 0;
#X restore 581 98 pd t60;
#X connect 0 0 15 0;
#X connect 5 0 27 0;
#X connect 5 0 27 1;
#X connect 5 0 51 0;
#X connect 6 0 5 0;
#X connect 7 0 23 0;
#X connect 8 0 28 0;
#X connect 11 0 10 0;
#X connect 12 0 49 0;
#X connect 13 0 25 0;
#X connect 14 0 36 0;
#X connect 15 0 21 0;
#X connect 15 1 17 0;
#X connect 18 0 21 0;
#X connect 18 1 16 0;
#X connect 21 0 37 0;
#X connect 23 0 46 4;
#X connect 23 0 46 3;
#X connect 24 0 46 0;
#X connect 25 0 0 0;
#X connect 28 0 29 0;
#X connect 29 0 46 1;
#X connect 36 0 18 0;
#X connect 37 0 39 0;
#X connect 39 0 45 0;
#X connect 42 0 40 0;
#X connect 44 0 42 0;
#X connect 44 1 41 0;
#X connect 45 0 44 0;
#X connect 46 0 33 1;
#X connect 46 0 33 0;
#X connect 46 0 47 1;
#X connect 49 0 50 0;
#X connect 49 1 47 0;
#X connect 50 0 24 0;
#X connect 51 0 48 0;
