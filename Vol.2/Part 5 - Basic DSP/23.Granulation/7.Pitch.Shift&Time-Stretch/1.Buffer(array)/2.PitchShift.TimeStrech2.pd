#N canvas 319 99 872 629 12;
#X obj 648 85 table \$0-buffer;
#X obj 480 90 soundfiler;
#X obj 480 146 samplerate~;
#X obj 557 175 /;
#X msg 253 393 \; speed 8 \; cents -4200 \; grain 400;
#X msg 132 396 \; speed -36 \; cents 200 \; grain 1000;
#X msg 132 468 \; speed 8 \; cents -3400 \; grain 400;
#X msg 132 324 \; speed 50 \; cents -4200 \; grain 100;
#X msg 253 466 \; speed 4 \; cents -2400 \; grain 14;
#X text 149 297 presets:;
#X obj 254 299 loadbang;
#X msg 254 324 \; speed 100 \; grain 25 \; cents 0;
#X obj 728 275 nbx 5 18 -1e+37 1e+37 0 0 empty speed empty 0 -8 0 13
-228856 -1 -1 8 256;
#X obj 643 508 +~;
#X obj 635 275 nbx 4 18 -1e+37 1e+37 0 0 empty cents empty 0 -8 0 13
-228856 -1 -1 -900 256;
#X text 591 276 Cents;
#X obj 728 307 /~ 100;
#X obj 488 272 nbx 4 18 3 1e+37 0 0 empty grain empty 0 -8 0 13 -191407
-1 -1 28 256;
#X obj 658 346 -~;
#X obj 640 372 *~;
#X obj 643 548 out~;
#X obj 728 430 else/display~ 5;
#X obj 640 395 else/display~ 5;
#X text 776 431 Hz;
#X obj 635 303 cents2ratio;
#X obj 515 305 expr 1000 / $f1;
#X obj 488 363 ms2samps;
#X text 487 249 size (ms);
#X text 593 254 Transposition;
#X obj 480 30 initmess read -resize ../../../../../samples/bubul.wav
\$0-buffer, f 39;
#N canvas 548 149 536 467 grain-2 0;
#X obj 211 223 +~;
#X obj 141 194 *~;
#X obj 306 371 *~;
#X obj 306 399 outlet~;
#X obj 229 94 inlet~;
#X obj 159 171 sh~;
#X obj 324 204 envelope~;
#X obj 141 93 inlet~;
#X obj 229 123 phasor~;
#X obj 229 191 *~;
#X obj 211 308 tabread4~ \$0-buffer, f 9;
#X obj 211 282 wrap2~;
#X obj 141 123 pimp~ 0 0.5;
#X obj 301 143 r \$0-size;
#X obj 54 123 r~ \$0-samps;
#X text 91 45 Same thing \, but [pimp~] is out of phase.;
#X connect 0 0 11 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 8 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 7 0 12 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 2 0;
#X connect 11 0 10 0;
#X connect 12 0 1 0;
#X connect 12 0 6 0;
#X connect 12 1 5 1;
#X connect 13 0 9 1;
#X connect 13 0 11 2;
#X connect 14 0 5 0;
#X restore 661 478 pd grain-2;
#X obj 480 120 t b f, f 14;
#X text 618 201 sample frequency;
#N canvas 316 135 576 564 grain-1 0;
#X obj 249 329 +~;
#X obj 194 300 *~;
#X obj 344 477 *~;
#X obj 344 505 outlet~;
#X obj 267 170 inlet~;
#X obj 212 277 sh~;
#X obj 362 310 envelope~;
#X obj 194 169 inlet~;
#X obj 267 229 phasor~;
#X obj 267 297 *~;
#X obj 249 414 tabread4~ \$0-buffer, f 9;
#X obj 249 388 wrap2~;
#X obj 194 229 pimp~;
#X obj 339 249 r \$0-size;
#X obj 104 229 r~ \$0-samps;
#X text 191 143 transp;
#X text 268 142 speed;
#X obj 267 197 display~ 8;
#X obj 194 197 display~ 8;
#X text 75 29 The speed frequency is multiplied by the sample lenght
in samples. The transposition frequency is sent to a [pimp~] object
\, which also controls the envelope. Its output is multiplied by the
grain size in samples and summed to the speed output. Now both frequencies
are combined and the sample is accessed.;
#X connect 0 0 11 0;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 17 0;
#X connect 5 0 1 1;
#X connect 6 0 2 1;
#X connect 7 0 18 0;
#X connect 8 0 9 0;
#X connect 9 0 0 1;
#X connect 10 0 2 0;
#X connect 11 0 10 0;
#X connect 12 0 1 0;
#X connect 12 0 6 0;
#X connect 12 1 5 1;
#X connect 13 0 9 1;
#X connect 13 0 11 2;
#X connect 14 0 5 0;
#X connect 17 0 8 0;
#X connect 18 0 12 0;
#X restore 570 477 pd grain-1;
#X obj 595 161 s \$0-size;
#X obj 488 389 s~ \$0-samps;
#X floatatom 515 330 5 0 0 0 - - -, f 5;
#X text 381 330 Grain Frequency =>;
#X obj 557 200 s \$0-Hz;
#X obj 728 392 *~;
#X obj 746 367 r \$0-Hz;
#X text 729 252 Speed (%);
#X text 591 394 transp;
#X text 689 399 Hz;
#X text 684 431 speed;
#X text 35 48 In this example we can choose any grain size and have
a quite different approach. The buffer is read by [pimp~] and [phasor~]
objects \, one affects the pitch and the other the speed., f 57;
#X text 35 111 These two are combined and need to be compensated for
the desired result. We do that by subtracting the speed ratio from
the transposition ratio.;
#X text 35 161 The speed frequency is calculated by the speed ratio
and the sample frequency. The transposition frequency needs to correspond
to the grain size \, so we multiply the resulting ratio by the grain
frequency \, obtained by the grain size., f 57;
#X text 35 244 Open [pd grain-1] for more details. Below we have some
presets.;
#X connect 1 0 31 0;
#X connect 2 0 3 0;
#X connect 3 0 38 0;
#X connect 10 0 11 0;
#X connect 12 0 16 0;
#X connect 13 0 20 0;
#X connect 13 0 20 1;
#X connect 14 0 24 0;
#X connect 16 0 18 1;
#X connect 16 0 39 0;
#X connect 17 0 25 0;
#X connect 17 0 26 0;
#X connect 18 0 19 1;
#X connect 19 0 22 0;
#X connect 21 0 30 1;
#X connect 21 0 33 1;
#X connect 22 0 30 0;
#X connect 22 0 33 0;
#X connect 24 0 18 0;
#X connect 25 0 36 0;
#X connect 26 0 35 0;
#X connect 29 0 1 0;
#X connect 30 0 13 1;
#X connect 31 0 2 0;
#X connect 31 1 3 1;
#X connect 31 1 34 0;
#X connect 33 0 13 0;
#X connect 36 0 19 0;
#X connect 39 0 21 0;
#X connect 40 0 39 1;
